/***********************************************************************************************************************
MessageBox - A jQuery Plugin to replace Javascript's window.alert(), window.confirm() and window.prompt() functions
    Author          : Gaspare Sganga
    Version         : 2.2.3
    License         : MIT
    Documentation   : https://gasparesganga.com/labs/jquery-message-box/
***********************************************************************************************************************/
!function(l,p){var s={buttonDone:"OK",buttonFail:p,buttonsOrder:"done fail",customClass:"",filterDone:p,filterFail:p,input:!1,message:"",queue:!0,speed:200,top:"25%",width:"auto"},f={overlay:{"box-sizing":"border-box",display:"flex","flex-flow":"column nowrap","align-items":"center",position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},spacer:{"box-sizing":"border-box",flex:"0 1 auto"},messagebox:{"box-sizing":"border-box",flex:"0 1 auto",display:"flex","flex-flow":"column nowrap"},content:{"box-sizing":"border-box",flex:"0 1 auto","overflow-y":"auto"},buttons:{"box-sizing":"border-box",flex:"0 0 auto"},boxSizing:{"box-sizing":"border-box"}},g=p,b=[],a=[],m={buttonDoneName:"buttonDone",buttonFailName:"buttonFail",errorSpeed:200,keyCodeDone:[13],keyCodeFail:[27],maxHeightCoefficient:1.5,topBuffer:100};function x(){!g&&a.length&&i(a.shift())}function i(o){var e=o.settings;g=o;var t=l("<div>",{class:"messagebox_overlay"}).css(f.overlay).appendTo("body"),n=l("<div>",{class:"messagebox_spacer"}).css(f.spacer).appendTo(t),s=l("<div>",{class:"messagebox"}).addClass(e.customClass).css(f.messagebox).data("instance",o).appendTo(t);e.width&&s.outerWidth(e.width);var a=l("<div>",{class:"messagebox_content",html:e.message}).css(f.content).appendTo(s);if(!1!==e.input&&e.input!==p&&null!==e.input){var i=l("<div>",{class:"messagebox_content_inputs",css:f.boxSizing}).appendTo(a);(function(e){if(!0===e||"string"==typeof e)return v(l("<input>",{value:!0===e?"":e,type:"text"}),{autotrim:!0});if(l.isArray(e)){var s=l([]);return l.each(e,function(e,t){s=s.add(v(l("<input>",{value:t,type:"text"}),{autotrim:!0}))}),s}if(l.isPlainObject(e)){var s=l([]);return l.each(e,function(e,t){var o=function(e,n){var t=l.trim(n.type).toLowerCase();switch(t){case"select":var s=v(l("<select>"),{name:e,title:n.title,autotrim:!1}),o=l.isArray(n.options)?n.options.reduce(function(e,t){return e[t]=t,e},{}):n.options;o||(i="jQuery MessageBox Warning: "+(i='No options provided for "'+e+'"'),window.console.warn?console.warn(i):window.console.log&&console.log(i),o={"":"&nbsp;"});var a=!1;return l.each(o,function(e,t){var o=l("<option>",{value:e,html:t}).appendTo(s);n.default===e&&(o.prop("selected",!0),a=!0)}),a||(l("<option>",{value:"",text:n.title}).prop({disabled:!0,selected:!0,hidden:!0}).prependTo(s),s.find("option").css("color",s.css("color")),s.addClass("messagebox_content_input_selectplaceholder").prop("selectedIndex",0).one("change",function(){s.find("option").css("color",""),s.removeClass("messagebox_content_input_selectplaceholder")})),s;case"text":case"password":default:return v(l("<input>",{type:"password"===t?"password":"text",maxlength:n.maxlength,placeholder:n.title,value:n.default}),{name:e,title:n.title,autotrim:n.autotrim})}var i}(e,t);if(t.label!==p){var n=l("<label>",{class:"messagebox_content_label",css:f.boxSizing,text:t.label});o.appendTo(n),s=s.add(n)}else s=s.add(o)}),s}return l(e)})(e.input).appendTo(i).first().trigger("focus")}l("<div>",{class:"messagebox_content_error",css:f.boxSizing}).hide().appendTo(a);var r=l("<div>",{class:"messagebox_buttons"}).css(f.buttons).appendTo(s);if(e.buttonDone){var c=l([]);"string"==typeof e.buttonDone?c=c.add(h("messagebox_button_done",m.buttonDoneName,{text:e.buttonDone,keyCode:m.keyCodeDone.concat(e.buttonFail?[]:m.keyCodeFail)},o)):l.each(e.buttonDone,function(e,t){c=c.add(h("messagebox_button_done",e,t,o))}),c.appendTo(r)}if(e.buttonFail){c=l([]);"string"==typeof e.buttonFail?c=c.add(h("messagebox_button_fail",m.buttonFailName,{text:e.buttonFail,keyCode:m.keyCodeFail},o)):l.each(e.buttonFail,function(e,t){c=c.add(h("messagebox_button_fail",e,t,o))}),0===l.trim(e.buttonsOrder).toLowerCase().indexOf("d")?c.appendTo(r):c.prependTo(r)}var u=0,d=0-s.outerHeight()-m.topBuffer;"auto"===l.trim(e.top).toLowerCase()?(t.css("justify-content","center"),d-=l(window).height()):(t.css("justify-content","flex-start"),u=e.top,"%"===l.trim(e.top).toLowerCase().slice(-1)?s.css("max-height",100-parseInt(e.top,10)*m.maxHeightCoefficient+"%"):s.data("fRefreshMaxHeight",!0)),n.data("spacerTopMargin",d).css({height:0,"margin-top":d}).animate({height:u,"margin-top":0},e.speed,function(){y(s,l(window).height())})}function h(e,t,o,n){"string"==typeof o&&(o={text:o});var s=l("<button>",{class:e,text:o.text||""}).addClass(o.class).css(f.boxSizing).on("click",{name:t},r);return l.each(function(e){"number"!=typeof e&&"string"!=typeof e||(e=[e]);var t=[];l.isArray(e)&&(t=l.map(e,function(e){return parseInt(e,10)||p}));return t}(o.keyCode),function(e,t){n.keyCodes[t]=s}),s}function v(e,t){return!1!==t.autotrim&&e.on("blur",o),e.addClass("messagebox_content_input").css(f.boxSizing).attr({name:t.name,title:t.title})}function y(e,t){e.data("fRefreshMaxHeight")&&e.css("max-height",t-e.offset().top*m.maxHeightCoefficient)}function o(e){var t=l(e.currentTarget);t.val(l.trim(t.val()))}function r(e){var t=l(e.currentTarget),o=e.data.name,n=t.closest(".messagebox"),s=n.closest(".messagebox_overlay"),a=s.children(".messagebox_spacer").first(),i=n.children(".messagebox_content").first(),r=i.children(".messagebox_content_error").first(),c=n.data("instance"),u=function(e){var t=[],o=[];if(e.find(".messagebox_content_inputs").find("input, select").each(function(){var e=l(this);t.push(e.attr("name")),o.push(e.val())}),!o.length)return p;var n={},s=!1;return l.each(t,function(e,t){if(t===p)return!(s=!0);n[t]=o[e]}),s&&1===o.length?o[0]:s?o:n}(n),d=t.hasClass("messagebox_button_done")?c.settings.filterDone:c.settings.filterFail;r.hide().empty(),("function"!==l.type(d)?l.Deferred().resolve():l.when(d(u,o)).then(function(e){if(!1===e)return l.Deferred().reject();var t=l.type(e);return"error"===t?l.Deferred().reject(e.message):"string"===t||"object"===t||"array"===t?l.Deferred().reject(e):l.Deferred().resolve()})).then(function(){a.animate({height:0,"margin-top":a.data("spacerTopMargin")},c.settings.speed,function(){s.remove(),t.hasClass("messagebox_button_done")?c.deferred.resolve(u,o):c.deferred.reject(u,o),b.length?g=b.pop():(g=p,x())})},function(e){var t=l.type(e);"string"!==t&&"object"!==t&&"array"!==t||r.css("max-width",i.width()).append(e).slideDown(m.errorSpeed,function(){i.scrollTop(i.height())})})}function e(e){if(g){var t=l(e.currentTarget).width(),o=l(e.currentTarget).height();l(document).find(".messagebox").each(function(){var e=l(this);e.css("min-width",e.outerWidth()>t?t:""),y(e,o)})}}function t(e){if(g){var t=g.keyCodes[e.which];t&&(t.closest(".messagebox").find(".messagebox_content_input").trigger("blur"),t.trigger("click"))}}l.MessageBoxSetup=function(e){l.extend(!0,s,e)},l.MessageBox=function(e){l.isPlainObject(e)||(e={message:e});var t=l.Deferred(),o=l.extend(!0,{},s,e);o.top=l.trim(o.top).toLowerCase(),l(document.activeElement).not(".messagebox_content_input").trigger("blur");var n={deferred:t,keyCodes:{},settings:o};return o.queue?(a.push(n),x()):(g&&b.push(g),i(n)),t.promise()},l(function(){l(window).on("resize",e).on("keydown",t)})}(jQuery);